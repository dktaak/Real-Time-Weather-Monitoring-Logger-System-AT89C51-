C51 COMPILER V9.60.0.0   LCD4_DRIVER                                                       04/09/2021 03:10:58 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD4_DRIVER
OBJECT MODULE PLACED IN .\Objects\lcd4_driver.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE lcd4_driver.c OPTIMIZE(8,SPEED) BROWSE PRINT(.\Listings\lcd4_driver.lst)
                    - TABS(2) OBJECT(.\Objects\lcd4_driver.obj)

line level    source

   1          #include"header.h"
   2          extern void delay(u16);
   3          #define lcd_port P0
   4          
   5          sbit RS=P2^0;
   6          sbit RW=P2^1;
   7          sbit EN=P2^2;
   8          
   9          void lcd_cmd(u8 cmd)
  10          {
  11   1        /*send higher nibble*/
  12   1        lcd_port=(cmd&0xf0);
  13   1        RS=0;
  14   1        RW=0;
  15   1        EN=1;
  16   1        delay(2);
  17   1        EN=0;
  18   1        
  19   1          /*send lower nibble*/
  20   1        lcd_port=(cmd<<4);
  21   1        RS=0;
  22   1        RW=0;
  23   1        EN=1;
  24   1        delay(2);
  25   1        EN=0;
  26   1      }
  27          void lcd_data(u8 ch)
  28          {
  29   1          /*send higher nibble*/
  30   1        lcd_port=(ch&0xf0);
  31   1        RS=1;
  32   1        RW=0;
  33   1        EN=1;
  34   1        delay(2);
  35   1        EN=0;
  36   1            /*send lower nibble*/
  37   1          lcd_port=(ch<<4);
  38   1        RS=1;
  39   1        RW=0;
  40   1        EN=1;
  41   1        delay(2);
  42   1        EN=0;
  43   1      }
  44          void lcd_init(void)
  45          {
  46   1        lcd_cmd(0x02);//cursur move to home position
  47   1        lcd_cmd(0x28);//8 bit_ mode
  48   1        lcd_cmd(0x0E);//cursur on
  49   1        lcd_cmd(0x01);
  50   1      }
  51          
  52          void lcd_int(signed long int n){
  53   1        signed long int i=0,a[16];
  54   1        if(n<0){
C51 COMPILER V9.60.0.0   LCD4_DRIVER                                                       04/09/2021 03:10:58 PAGE 2   

  55   2          lcd_data('-');
  56   2          n=-n;
  57   2        }
  58   1        while(n){
  59   2          a[i]=n%10;
  60   2          i++;
  61   2          n=n/10;
  62   2        }
  63   1        for(i=i-1;i>=0;i--){
  64   2          lcd_data(a[i]+48);
  65   2        }
  66   1      }
  67          
  68          void lcd_float(float f){
  69   1        long int ip,dp;
  70   1        if(f<0){
  71   2          lcd_data('-');
  72   2          f=-f;
  73   2        }
  74   1        ip=f;
  75   1        dp=(f-ip)*100;
  76   1        lcd_int(ip);
  77   1        lcd_data('.');
  78   1        lcd_int(dp);
  79   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    441    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      86
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
